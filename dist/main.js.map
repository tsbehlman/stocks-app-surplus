{"version":3,"file":"main.js","sources":["webpack:///webpack/bootstrap","webpack:///./src/AppView.jsx","webpack:///./src/CardChart.jsx","webpack:///./src/Math.js","webpack:///./src/StockCard.jsx","webpack:///./src/main.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","import S from \"s-js\";\nimport SArray from \"s-array\";\nimport * as Surplus from \"surplus\";\nimport { StockCard } from \"./StockCard.jsx\";\n\nfunction randomInt( min, max ) {\n\treturn Math.round( Math.random() * ( max - min ) + min );\n}\n\nfunction fakeData() {\n\tconst points = [];\n\tconst length = randomInt( 5, 10 );\n\tfor( let i = 0; i < length; i++ ) {\n\t\tpoints.push( randomInt( 400, 500 ) );\n\t}\n\treturn points;\n}\n\nconst data = [\n\t{\n\t\tsymbol: \"DJI\",\n\t\tname: \"Dow Jones Industrial Average\",\n\t\tprice: 25989.30,\n\t\tchange: -159.81\n\t},\n\t{\n\t\tsymbol: \"AAPL\",\n\t\tname: \"Apple\",\n\t\tprice: 168.34,\n\t\tchange: 5.34\n\t},\n\t{\n\t\tsymbol: \"UTX\",\n\t\tname: \"United Technologies\",\n\t\tprice: 130.71,\n\t\tchange: -0.63\n\t},\n\t{\n\t\tsymbol: \"ES\",\n\t\tname: \"Eversource Energy\",\n\t\tprice: 66.82,\n\t\tchange: 0.4\n\t},\n\t{\n\t\tsymbol: \"AMD\",\n\t\tname: \"Advanced Micro Devices\",\n\t\tprice: 19.38,\n\t\tchange: 0.66\n\t},\n\t{\n\t\tsymbol: \"NVDA\",\n\t\tname: \"NVIDIA Corporation\",\n\t\tprice: 145,\n\t\tchange: 0\n\t}\n].map( stock => ( { ...stock, history: fakeData() } ) );\n\nfunction getStock( symbol ) {\n\tconst stock = {\n\t\tsymbol,\n\t\tname: S.value( \"\" ),\n\t\tprice: S.value( NaN ),\n\t\tchange: S.value( NaN ),\n\t\thistory: SArray( [] )\n\t};\n\t//sleep( randomInt( 100, 800 ) ).then( () => {\n\t\tconst stockData = stockForSymbol.get( symbol );\n\t\tstock.name( stockData.name );\n\t\tstock.price( stockData.price );\n\t\tstock.change( stockData.change );\n\t\tstock.history.splice( 0, 0, ...stockData.history );\n\t\tsetInterval( () => {\n\t\t\tstock.history.push( randomInt( 400, 500 ) );\n\t\t}, 1000 );\n\t//} );\n\treturn stock;\n}\n\nconst stockForSymbol = new Map( data.map( datum => [ datum.symbol, datum ] ) );\n\n//const symbols = SArray( [] );\nconst symbols = SArray( data.map( datum => datum.symbol ).slice(0,3) );\nconst stocks = symbols.map( symbol => getStock( symbol ) );\n\nfunction sleep( duration ) {\n\treturn new Promise( ( resolve, reject ) => setTimeout( resolve, duration ) );\n}\n\nfunction pushCallback( e ) {\n\tif( stockForSymbol.has( this.value ) ) {\n\t\tsymbols.push( this.value );\n\t}\n}\n\nexport const AppView = () =>\n\t(function () {\r\n    var __, __input1, __insert2;\r\n    __ = Surplus.createElement(\"div\", null, null);\r\n    __.id = \"AppView\";\r\n    __input1 = Surplus.createElement(\"input\", \"card add\", __);\r\n    __input1.type = \"text\";\r\n    __input1.onblur =  pushCallback ;\r\n    __insert2 = Surplus.createTextNode('', __)\r\n    Surplus.S.effect(function (__range) { return Surplus.insert(__range,  stocks.map( stock => StockCard( stock ) ) ); }, { start: __insert2, end: __insert2 });\r\n    return __;\r\n})();","import S from \"s-js\";\nimport SArray from \"s-array\";\nimport * as Surplus from \"surplus\";\nimport { Cubic, roundToPlace } from \"./Math.js\";\n\nexport const CardChart = ( points, className ) => {\n\tconst viewBox = S.data( \"0 0 0 0\" );\n\tconst pathData = S.data( \"\" );\n\t\n\tlet p0, p1, p2, p3;\n\tlet minX = +Infinity;\n\tlet maxX = -Infinity;\n\tlet minY = +Infinity;\n\tlet maxY = -Infinity;\n\tlet firstCurve;\n\tlet lastCurve;\n\tlet curves = \"\";\n\tlet numPoints = 0;\n\t\n\tS.on( points, () => {\n\t\twhile( numPoints < points().length ) {\n\t\t\tconst point = points()[ numPoints++ ];\n\t\t\tp0 = p1;\n\t\t\tp1 = p2;\n\t\t\tp2 = p3;\n\t\t\tp3 = point;\n\t\t\t\n\t\t\tmaxX = point.x;\n\t\t\tminY = Math.min( minY, point.y );\n\t\t\tmaxY = Math.max( maxY, point.y );\n\t\t\tif( numPoints === 1 ) {\n\t\t\t\tminX = point.x;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif( numPoints > 2 ) {\n\t\t\t\tif( numPoints > 3 ) {\n\t\t\t\t\tconst curve = Cubic.spline( p0, p1, p2, p3 );\n\t\t\t\t\tminY = Math.min( minY, curve.p1.y );\n\t\t\t\t\tmaxY = Math.max( maxY, curve.p1.y );\n\t\t\t\t\tminY = Math.min( minY, curve.p2.y );\n\t\t\t\t\tmaxY = Math.max( maxY, curve.p2.y );\n\t\t\t\t\tcurves += curve.toString();\n\t\t\t\t}\n\t\t\t\telse if( numPoints === 3 ) {\n\t\t\t\t\tfirstCurve = Cubic.spline( p1, p1, p2, p3 ).toString();\n\t\t\t\t}\n\t\t\t\tlastCurve = Cubic.spline( p1, p2, p3, p3 ).toString();\n\t\t\t}\n\t\t}\n\t\t\n\t\tif( numPoints === 0 ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tconst pathPrefix = `M${ minX } ${ maxY }V${ points()[ 0 ].y }`;\n\t\tconst pathSuffix = `V${ maxY }Z`;\n\t\t\n\t\tif( numPoints < 3 ) {\n\t\t\tpathData( pathPrefix + p2 + p3 + pathSuffix );\n\t\t}\n\t\telse {\n\t\t\tpathData( pathPrefix + firstCurve + curves + lastCurve + pathSuffix );\n\t\t}\n\t\t\n\t\tviewBox( `${ minX } ${ minY } ${ roundToPlace( maxX - minX, 3 ) } ${ roundToPlace( maxY - minY, 3 ) }` );\n\t} );\n\t\n\treturn (\n\t\t(function () {\r\n    var __, __path1;\r\n    __ = Surplus.createSvgElement(\"svg\", null, null);\r\n    __path1 = Surplus.createSvgElement(\"path\", null, __);\r\n    Surplus.S.effect(function () { Surplus.setAttribute(__path1, \"d\",  pathData() ); });\r\n    Surplus.S.effect(function () {\r\n        Surplus.setAttribute(__, \"class\",  `card-chart ${ className() }` );\r\n        Surplus.setAttribute(__, \"preserveAspectRatio\", \"none\");\r\n        Surplus.setAttribute(__, \"viewBox\",  viewBox() );\r\n    });\r\n    return __;\r\n})()\n\t);\n};","export function roundToPlace( number, place ) {\n\tconst precision = Math.pow( 10, place );\n\treturn Math.round( number * precision ) / precision;\n}\n\nexport class Point {\n\tconstructor( x, y ) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\t\n\ttransform( callback ) {\n\t\tcallback( this );\n\t}\n\n\ttoString() {\n\t\treturn `L${this.x},${this.y}`;\n\t}\n}\n\nfunction line( a, b ) {\n\tconst x = b.x - a.x;\n\tconst y = b.y - a.y;\n\treturn {\n\t\tlength: Math.hypot( y, x ),\n\t\tangle: Math.atan2( y, x )\n\t}\n}\n\nfunction applyLineToPoint( point, line ) {\n\treturn new Point(\n\t\troundToPlace( point.x + Math.cos( line.angle ) * line.length, 3 ),\n\t\troundToPlace( point.y + Math.sin( line.angle ) * line.length, 3 )\n\t);\n}\n\nconst SMOOTHING_FACTOR = 0.2;\n\nexport class Cubic {\n\tconstructor( p1, p2, p3 ) {\n\t\tthis.p1 = p1;\n\t\tthis.p2 = p2;\n\t\tthis.p3 = p3;\n\t}\n\t\n\ttransform( callback ) {\n\t\tcallback( this.p1 );\n\t\tcallback( this.p2 );\n\t\tcallback( this.p3 );\n\t}\n\n\ttoString() {\n\t\treturn `C${this.p1.x},${this.p1.y} ${this.p2.x},${this.p2.y} ${this.p3.x},${this.p3.y}`;\n\t}\n\t\n\t// https://medium.com/@francoisromain/e37b49d46c74\n\tstatic spline( p0, p1, p2, p3 ) {\n\t\tconst line1 = line( p0, p2 );\n\t\tline1.length *= SMOOTHING_FACTOR;\n\t\tconst line2 = line( p1, p3 );\n\t\tline2.length *= SMOOTHING_FACTOR;\n\t\tline2.angle += Math.PI;\n\t\treturn new Cubic( applyLineToPoint( p1, line1 ), applyLineToPoint( p2, line2 ), p2 );\n\t}\n}","import S from \"s-js\";\nimport * as Surplus from \"surplus\";\nimport { CardChart } from \"./CardChart.jsx\";\nimport { Point } from \"./Math.js\";\n\nfunction formatNumber( number, decimalPlaces ) {\n\tif( isNaN( number ) ) {\n\t\treturn \"\\u2013 \\u2013\";\n\t}\n\telse {\n\t\treturn number.toFixed( decimalPlaces );\n\t}\n}\n\nexport const StockCard = stock => {\n\tconst changeText = S.value( \"\" );\n\tconst changeClass = S.value( \"\" );\n\t\n\tS( () => {\n\t\tconst change = stock.change();\n\t\tlet text = formatNumber( change, 2 );\n\t\tlet className = \"neutral\";\n\t\t\n\t\tif( change < 0 ) {\n\t\t\tclassName = \"negative\";\n\t\t}\n\t\telse if( change > 0 ) {\n\t\t\ttext = \"+\" + text;\n\t\t\tclassName = \"positive\";\n\t\t}\n\t\t\n\t\tchangeText( text );\n\t\tchangeClass( className );\n\t} );\n\t\n\tconst history = stock.history.map( ( price, v, index ) => new Point( index, -price ) );\n\t\n\treturn (\n\t\t(function () {\r\n    var __, __div1, __div1_h31, __div1_strong2, __div1_p3, __div1_p4, __insert2;\r\n    __ = Surplus.createElement(\"div\", \"card stock\", null);\r\n    __div1 = Surplus.createElement(\"div\", \"card-details\", __);\r\n    __div1_h31 = Surplus.createElement(\"h3\", null, __div1);\r\n    Surplus.content(__div1_h31,  stock.symbol , \"\");\r\n    __div1_strong2 = Surplus.createElement(\"strong\", null, __div1);\r\n    __div1_p3 = Surplus.createElement(\"p\", null, __div1);\r\n    __div1_p4 = Surplus.createElement(\"p\", null, __div1);\r\n    __insert2 = Surplus.createTextNode('', __)\r\n    Surplus.S.effect(function (__current) { return Surplus.content(__div1_strong2,  formatNumber( stock.price(), 2 ) , __current); }, '');\r\n    Surplus.S.effect(function (__current) { return Surplus.content(__div1_p3,  stock.name() , __current); }, '');\r\n    Surplus.S.effect(function (__current) { return Surplus.content(__div1_p4,  changeText() , __current); }, '');\r\n    Surplus.S.effect(function () { __div1_p4.className =  `value ${ changeClass() }` ; });\r\n    Surplus.S.effect(function (__range) { return Surplus.insert(__range,  CardChart( history, changeClass ) ); }, { start: __insert2, end: __insert2 });\r\n    return __;\r\n})()\n\t);\n};","import S from \"s-js\";\nimport { AppView } from \"./AppView.jsx\";\n\nS.root( () => {\n\tdocument.body.appendChild( AppView() );\n} );"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjFA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}